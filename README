Nginx+Gunicorn+Supervisor 部署 Django

安装python3.6
安装可能的依赖
yum install -y openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel
下载源码
wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tgz
tar -zxvf Python-3.6.4.tgz
cd Python-3.6.4
./configure LD_RUN_PATH=/usr/local/lib LDFLAGS="-L/usr/local/lib" CPPFLAGS="-I/usr/local/include"
make LD_RUN_PATH=/usr/local/lib
make install


安装nginx
yum install epel-release -y
yum install nginx -y

Nginx 的配置
/etc/nginx/conf.d/ 目录下新增slgweb.conf
server {
    charset utf-8;
    listen 80;
    server_name slgweb.com;

    location /static {
        alias /home/slgweb/static;
    }

    location / {
        proxy_set_header Host $host;
        proxy_pass http://127.0.0.1:8000;
    }
}
service restart nginx


django
django配置文件设置为
setting.py指定ALLOWED_HOSTS的值
DEBUG=False         #关闭 DEBUG 模式
pipenv run python manage.py collectstatic       #收集静态文件

django缓存使用memcache
windows:
[./extend/memcached/windows/]memcached -p 11211 -l 127.0.0.1 -m 1024
cmd窗口不关闭即可为开发环境提供服务

django日志
使用django开发、调试时，如果log使用了RotatingFileHandler输出日志，当第一个日志文件写满(设置了每个日志文件为5MB）产生第二个文件时，会出现如下的错误，导致无法生成后续的日志文件：
Django RotatingFileHandler产生的错误：PermissionError: [WinError 32] 另一个程序正在使用此文件，进程无法访问。
使用python manager.py runserver --noreload


安装mysqlclient报错：MySQLdb/_mysql.c:501: error: ‘MYSQL_DEFAULT_AUTH’ undeclared， mysql版本过低，不支持mysql5.1，安装mysql5.7或更高

